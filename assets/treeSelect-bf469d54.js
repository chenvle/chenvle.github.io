import{c as Q}from"./index-686ed3a2.js";import{d as A,y as O,l as K,i as X,a as F,m as B,H as Z,n as L,f as N,b as v,V as z,v as w,K as D,c as E,S as ee,s as U,t as R,e as _,z as te,w as b,W as P,ac as le,F as ie,r as k,B as V,o as ae,L as ne,x as W,ad as I,R as H,a7 as se,Y as de,_ as oe,p as ce,h as ue}from"./index-044a8b13.js";import{c as re}from"./index-36c946e4.js";import{_ as he}from"./index2-a2f605d4.js";const fe=["onClick"],ye={class:"layui-tree-main"},pe=["onClick"],me={key:0,class:"layui-tree-pack layui-tree-showLine",style:{display:"block"}},ke={name:"TreeNode"},Ce=A({...ke,props:{tree:null,nodeList:null,showCheckbox:{type:Boolean},showLine:{type:Boolean},selectedKey:null,checkStrictly:{type:[Boolean,String]},collapseTransition:{type:Boolean},onlyIconControl:{type:Boolean}},emits:["node-click"],setup(l,{emit:t}){const e=l;O();function a(i){return!i.hasNextSibling&&i.parentNode&&(!i.parentNode.hasNextSibling||i.parentNode.hasNextSibling&&!i.parentNode.children)}const s=i=>e.showLine?i.children.length!==0?i.isLeaf?"layui-icon-subtraction":"layui-icon-addition":"layui-icon-file":i.children.length>0?"layui-tree-iconArrow ":"";function d(i){t("node-click",i)}function n(i,u){e.tree.setCheckedKeys(i,e.checkStrictly,u)}function r(i){i.isLeaf=!i.isLeaf}function f(i){e.onlyIconControl||r(i),i.isDisabled||t("node-click",i)}function m(i){e.showLine||f(i)}const y=K(()=>{function i(u){if(!e.showCheckbox)return!1;let p=0,o=!1;for(const x of u.children)x.isChecked&&p++;if(p>0&&(u.isChecked=!0),p==u.children.length){for(const x of u.children)if(o=i(x),o)break}else o=!0;return o}return u=>e.checkStrictly?!1:i(u)});return(i,u)=>{const p=X("tree-node",!0);return F(!0),B(ie,null,Z(l.nodeList,(o,x)=>(F(),B("div",{key:x,class:L({"layui-tree-set":!0,"layui-tree-setLineShort":a(o),"layui-tree-setHide":o.isRoot})},[N("div",{class:"layui-tree-entry",onClick:g=>m(o)},[N("div",ye,[N("span",{class:L([l.showLine&&o.children.length>0?"layui-tree-icon":"",{"layui-tree-iconClick":!0}])},[v(w(D),{type:s(o),onClick:z(g=>r(o),["stop"])},null,8,["type","onClick"])],2),l.showCheckbox?(F(),E(ee,{key:0,value:"",skin:"primary",modelValue:o.isChecked,disabled:o.isDisabled,isIndeterminate:w(y)(o),onChange:g=>n(g,o)},null,8,["modelValue","disabled","isIndeterminate","onChange"])):U("",!0),N("span",{class:L({"layui-tree-txt":!0,"layui-disabled":o.isDisabled,"layui-this":l.selectedKey===o.id}),onClick:z(g=>f(o),["stop"])},[R(i.$slots,"title",{data:o},()=>[_(te(o.title),1)])],10,pe)])],8,fe),v(le,{enable:l.collapseTransition},{default:b(()=>[o.isLeaf?(F(),B("div",me,[v(p,{tree:l.tree,"node-list":o.children,"show-checkbox":l.showCheckbox,"show-line":l.showLine,"selected-key":l.selectedKey,"collapse-transition":l.collapseTransition,checkStrictly:l.checkStrictly,"only-icon-control":l.onlyIconControl,onNodeClick:d},P({_:2},[i.$slots.title?{name:"title",fn:b(g=>[R(i.$slots,"title",{data:g.data})]),key:"0"}:void 0]),1032,["tree","node-list","show-checkbox","show-line","selected-key","collapse-transition","checkStrictly","only-icon-control"])])):U("",!0)]),_:2},1032,["enable"])],2))),128)}}});class ve{constructor(t,e){this.config=t,this.treeData=[],this.init(e)}init(t){const e=this.createTree(t);this.treeData=e}createTree(t,e=""){let a;Array.isArray(t)?a=t:a=Array.of(Object.assign({},t));const s=[],{children:d}=this.config.replaceFields,n=a.length;for(let r=0;r<n;r++){const f=this.getNode(a[r],e,r<n-1),m=Reflect.get(f,d);!!Reflect.get(f,d)&&Reflect.set(f,d,this.createTree(m,f.id)),s.push(f)}return s}getNode(t,e,a){const{nodeMap:s,originMap:d,checkedKeys:n,expandKeys:r,replaceFields:{children:f,id:m,title:y}}=this.config,i=Reflect.get(t,m),u=Reflect.get(t,y),p=Reflect.get(t,f),o=!!Reflect.get(t,"disabled"),x=!!Reflect.get(t,"spread")||r.includes(i),g=s.get(e),S=Object.assign({},t,{id:i,title:u,children:p||[],parentKey:e,isRoot:e==="",isDisabled:!1,isChecked:!1,isLeaf:!1,hasNextSibling:a,parentNode:g||null});return S.isDisabled=o,S.isChecked=n.includes(i),S.isLeaf=g?g.isLeaf:r.includes(i),S.isLeaf=x,s.has(i)||s.set(i,S),d.has(i)||d.set(i,t),S}treeForeach(t,e){t.forEach(a=>{a.children&&this.treeForeach(a.children,e),e(a)})}setChildrenChecked(t,e){var a=0,s=0;const d=e.length;this.treeForeach(e,n=>{n.isDisabled||(a=a+1,n.isChecked&&(s=s+1))}),s<a?t=!0:t=!1;for(let n=0;n<d;n++)(!e[n].isDisabled||e[n].isDisabled&&e[n].children.length>0)&&(e[n].isChecked=t),e[n].children&&e[n].children.length>0&&this.setChildrenChecked(t,e[n].children)}setParentChecked(t,e){if(!e)return;e.isChecked=t,e.children.some(d=>d.isChecked)&&(e.isChecked=!0),e.parentNode&&this.setParentChecked(t,e.parentNode)}setCheckedKeys(t,e,a){a.isChecked=t,e||(a.parentNode&&this.setParentChecked(t,a.parentNode),a.children&&this.setChildrenChecked(t,a.children))}getData(){return this.treeData}getKeys(){const t=[],e=[],a=this.config.nodeMap[Symbol.iterator]();let s=a.next();for(;!s.done;){const[,d]=s.value,n=Reflect.get(d,this.config.replaceFields.id);d.isChecked&&e.push(n),d.isLeaf&&t.push(n),s=a.next()}return{checkedKeys:e,expandKeys:t}}getOriginData(t){return this.config.originMap.get(t)}}const ge=(l,t)=>{var e,a,s,d;const n=new ve({nodeMap:new Map,originMap:new Map,replaceFields:{id:"id",title:"title",children:"children"},showCheckbox:(e=l.showCheckbox)!=null?e:!1,checkedKeys:(a=l.checkedKeys)!=null?a:[],expandKeys:(s=l.expandKeys)!=null?s:[],checkStrictly:(d=l.checkStrictly)!=null?d:!1},l.data),r=K(()=>n.getData());return{tree:n,nodeList:r}},be={name:"LayTree"},j=A({...be,props:{data:null,disabled:{type:Boolean,default:!1},edit:{default:!1},checkedKeys:{default:()=>[]},expandKeys:null,checkStrictly:{type:[Boolean,String],default:!1},collapseTransition:{type:Boolean,default:!0},onlyIconControl:{type:Boolean,default:!1},selectedKey:null,showLine:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!1},replaceFields:{default:()=>({id:"id",children:"children",title:"title"})}},emits:["update:expandKeys","update:checkedKeys","node-click"],setup(l,{emit:t}){const e=l;O();const a=K(()=>({"layui-tree":!0,"layui-form":e.showCheckbox,"layui-tree-line":e.showLine}));let s=k(),d=k();const n=k(!1),r=k(!1),f=()=>{let{tree:u,nodeList:p}=ge(e);s.value=u,d.value=p.value};V(()=>e.data,()=>{n.value||f()},{deep:!0,immediate:!0}),V(()=>e.checkedKeys,()=>{n.value||f()}),V(()=>e.expandKeys,()=>{n.value||f()});const m=k(),y=k();V(s,()=>{if(r.value){const{checkedKeys:u,expandKeys:p}=s.value.getKeys();n.value=!0,String(y.value)!=String(u)&&(y.value=u,t("update:checkedKeys",u)),String(m)!=String(p)&&(m.value=p,t("update:expandKeys",p)),setTimeout(()=>{n.value=!1},0)}},{deep:!0}),ae(()=>{ne(()=>{r.value=!0})});function i(u){const p=s.value.getOriginData(u.id);t("node-click",p)}return(u,p)=>(F(),B("div",{class:L(w(a))},[v(Ce,{tree:w(s),"node-list":w(d),"show-checkbox":l.showCheckbox,"show-line":l.showLine,selectedKey:l.selectedKey,"check-strictly":l.checkStrictly,"collapse-transition":l.collapseTransition,"only-icon-control":l.onlyIconControl,onNodeClick:i},P({_:2},[u.$slots.title?{name:"title",fn:b(({data:o})=>[R(u.$slots,"title",{data:o})]),key:"0"}:void 0]),1032,["tree","node-list","show-checkbox","show-line","selectedKey","check-strictly","collapse-transition","only-icon-control"])],2))}});W(j);const we={class:"layui-tree-select-content"},xe={name:"LayTreeSelect"},Se=A({...xe,props:{data:null,modelValue:null,disabled:{type:Boolean,default:!1},placeholder:null,multiple:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},collapseTagsTooltip:{type:Boolean,default:!0},minCollapsedNum:{default:3},size:{default:"md"},checkStrictly:{type:Boolean,default:!0},search:{type:Boolean,default:!1}},emits:["update:modelValue","change","search"],setup(l,{emit:t}){const e=l,a=k(),s=k(),d=k(),n=k([]),r=k(!1),f=k(),m=k(!1),y=K({get(){return e.multiple&&e.modelValue==null?[]:e.modelValue},set(h){t("update:modelValue",h),t("change",h)}}),i=K({get(){return e.multiple?e.modelValue:[]},set(h){e.multiple&&(t("update:modelValue",h),t("change",h))}});V(y,()=>{if(e.multiple)n.value=y.value.map(h=>{const c=I(e.data,h);if(c)return c.label=c.title,c.value=c.id,c.closable=!c.disabled,c});else{const h=I(e.data,y.value);h?d.value=h.title:d.value=""}},{immediate:!0,deep:!0});const u=function(){e.multiple?t("update:modelValue",[]):t("update:modelValue","")},p=h=>{e.multiple||(f.value.hide(),y.value=h.id)},o=h=>{if(f.value.hide(),e.checkStrictly)t("update:modelValue",i.value.filter(c=>c!=h));else{const c=I(e.data,h),C=x(c);t("update:modelValue",i.value.filter(T=>!C.includes(T)))}},x=h=>{const c=[];function C(T,M){M.push(T.id),T.children&&T.children.forEach(J=>{C(J,M)})}return C(h,c),c},g=K(()=>Array.isArray(y)?y.value.length>0:y.value!=""&&y.value!=null&&y.value!=null),S=K(()=>g.value?"":e.placeholder),$=h=>{m.value||(t("search",h),s.value=h)},q=()=>{m.value=!0},G=h=>{m.value=!1,$(h.target.value)};return V(s,()=>{s.value===""?a.value=e.data:a.value=[]}),V(()=>e.data,()=>{a.value=e.data},{immediate:!0,deep:!0}),(h,c)=>(F(),B("div",{class:L(["layui-tree-select",{"layui-disabled":l.disabled,"has-content":w(g),"has-clear":l.allowClear}])},[v(de,{ref_key:"dropdownRef",ref:f,disabled:l.disabled,"update-at-scroll":!0,onShow:c[4]||(c[4]=C=>r.value=!0),onHide:c[5]||(c[5]=C=>r.value=!1)},{content:b(()=>[N("div",we,[v(j,{data:a.value,onlyIconControl:!0,"show-checkbox":l.multiple,"check-strictly":l.checkStrictly,selectedKey:w(y),"onUpdate:selectedKey":c[2]||(c[2]=C=>H(y)?y.value=C:null),checkedKeys:w(i),"onUpdate:checkedKeys":c[3]||(c[3]=C=>H(i)?i.value=C:null),onNodeClick:p},null,8,["data","show-checkbox","check-strictly","selectedKey","checkedKeys"])])]),default:b(()=>[l.multiple?(F(),E(he,{key:0,size:l.size,"allow-clear":l.allowClear,placeholder:w(S),collapseTagsTooltip:l.collapseTagsTooltip,minCollapsedNum:l.minCollapsedNum,disabledInput:!l.search,onInputValueChange:$,onRemove:o,onClear:u,modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=C=>n.value=C)},{suffix:b(()=>[v(w(D),{type:"layui-icon-triangle-d",class:L({triangle:r.value})},null,8,["class"])]),_:1},8,["size","allow-clear","placeholder","collapseTagsTooltip","minCollapsedNum","disabledInput","modelValue"])):(F(),E(se,{key:1,modelValue:d.value,"onUpdate:modelValue":c[1]||(c[1]=C=>d.value=C),"allow-clear":l.allowClear,placeholder:w(S),disabled:l.disabled,readonly:!l.search,size:l.size,onClear:u,onInput:$,onCompositionstart:q,onCompositionend:G},{suffix:b(()=>[v(w(D),{type:"layui-icon-triangle-d",class:L({triangle:r.value})},null,8,["class"])]),_:1},8,["modelValue","allow-clear","placeholder","disabled","readonly","size"]))]),_:1},8,["disabled"])],2))}}),Fe=W(Se);const Ke={setup(){const l=k(23),t=k([23]),e=k([{title:"一级1",id:1,field:"name1",children:[{title:"二级1-1 可允许跳转",id:3,field:"name11",href:"https://www.layui.com/",children:[{title:"三级1-1-3",id:23,field:"",children:[{title:"四级1-1-3-1",id:24,field:"",children:[{title:"五级1-1-3-1-1",id:30},{title:"五级1-1-3-1-2",id:31}]}]},{title:"三级1-1-1",id:7,field:"",children:[{title:"四级1-1-1-1 可允许跳转",id:15,href:"https://www.layui.com/doc/"}]},{title:"三级1-1-2",id:8,field:"",children:[{title:"四级1-1-2-1",id:32}]}]},{title:"二级1-2",id:4,spread:!0,children:[{title:"三级1-2-1",id:9},{title:"三级1-2-2",id:10}]},{title:"二级1-3",id:20,field:"",children:[{title:"三级1-3-1",id:21,field:""},{title:"三级1-3-2",id:22,field:""}]}]},{title:"一级2",id:2,children:[{title:"二级2-1",id:5,spread:!0,children:[{title:"三级2-1-1",id:11},{title:"三级2-1-2",id:12}]},{title:"二级2-2",id:6,children:[{title:"三级2-2-1",id:13},{title:"三级2-2-2",id:14}]}]},{title:"一级3",id:16,field:"",children:[{title:"二级3-1",id:17,field:"",fixed:!0,children:[{title:"三级3-1-1",id:18,field:""},{title:"三级3-1-2",id:19,field:""}]},{title:"二级3-2",id:27,field:"",children:[{title:"三级3-2-1",id:28,field:""},{title:"三级3-2-2",id:29,field:""}]}]}]);return{value1:l,value2:t,data:e}}};const Y=l=>(ce("data-v-4ddd3dad"),l=l(),ue(),l),Ne=Y(()=>N("p",{class:"header-title"},"下拉树",-1)),Ve=Y(()=>N("p",{class:"header-describe"},"二维条码 / 二维码（2-dimensional bar code）是用某种特定的几何图形按一定规律在平面（二维方向上）分布的、黑白相间的、记录数据符号信息的图形.",-1));function Le(l,t,e,a,s,d){const n=re,r=Fe,f=Q;return F(),B("div",null,[v(n,null,{default:b(()=>[Ne,Ve]),_:1}),v(f,{fluid:!0,style:{padding:"10px","padding-top":"0px"}},{default:b(()=>[v(n,null,{title:b(()=>[_("基础案例")]),default:b(()=>[v(r,{modelValue:a.value1,"onUpdate:modelValue":t[0]||(t[0]=m=>a.value1=m),data:a.data},null,8,["modelValue","data"])]),_:1}),v(n,null,{title:b(()=>[_("进阶使用")]),default:b(()=>[v(r,{modelValue:a.value2,"onUpdate:modelValue":t[1]||(t[1]=m=>a.value2=m),data:a.data,multiple:""},null,8,["modelValue","data"])]),_:1})]),_:1})])}const De=oe(Ke,[["render",Le],["__scopeId","data-v-4ddd3dad"]]);export{De as default};

import{d as D,a3 as B,r as c,l as b,$ as Y,a4 as q,v as n,a as y,m as K,c as O,R as G,S as X,s as E,t as S,e as Z,z as _,n as k,x as J,y as ee,o as le,B as ae,a5 as te,a6 as C,b as I,w as v,f as se,F as ne,H as oe,Q as ue,a2 as M,V as A,W,K as j,a7 as de,Y as re,a8 as ie}from"./index-044a8b13.js";import{_ as ce}from"./index2-a2f605d4.js";const fe={name:"LaySelectOption"},U=D({...fe,props:{label:{default:""},value:null,disabled:{type:Boolean,default:!1},keyword:{default:""}},setup(l){const o=l,d=B("searchValue"),f=B("selectRef"),$=B("searchMethod"),u=B("selectedValue"),V=B("multiple"),g=c(),p=()=>{var r;V.value?o.disabled||(r=g.value)==null||r.toggle():o.disabled||(f.value.hide(),u.value=o.value)},m=b(()=>V.value?u.value.indexOf(o.value)!=-1:u.value===o.value),w=c(!0),R=b(()=>{var r,h;return $&&!w.value?$(d.value,o):(w.value=!1,((r=o.keyword)==null?void 0:r.toString().indexOf(d.value))>-1||((h=o.label)==null?void 0:h.toString().indexOf(d.value))>-1)}),N=b(()=>["layui-select-option",{"layui-this":m.value,"layui-disabled":o.disabled}]);return(r,h)=>Y((y(),K("dd",{class:k(n(N)),onClick:p},[n(V)?(y(),O(X,{key:0,skin:"primary",ref_key:"checkboxRef",ref:g,modelValue:n(u),"onUpdate:modelValue":h[0]||(h[0]=T=>G(u)?u.value=T:null),disabled:l.disabled,value:l.value},null,8,["modelValue","disabled","value"])):E("",!0),S(r.$slots,"default",{},()=>[Z(_(l.label),1)])],2)),[[q,n(R)]])}}),be=J(U),ve={class:"layui-select-content"},pe={name:"LaySelect"},me=D({...pe,props:{name:null,disabled:{type:Boolean,default:!1},placeholder:null,searchPlaceholder:null,searchMethod:null,modelValue:{default:null},multiple:{type:Boolean,default:!1},items:null,size:{default:"md"},collapseTagsTooltip:{type:Boolean,default:!0},minCollapsedNum:{default:3},allowClear:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},contentClass:null,contentStyle:null},emits:["update:modelValue","change","search"],setup(l,{emit:o}){const d=l,f=ee(),$=c(),u=c(""),V=c(""),g=c([]),p=c(!1),m=c([]),w=c(!1);var R;const N=(e,a)=>{e==null||e.map(t=>{if(ie(t,t.children))N(t.children,a);else if(t.type.name==U.name){if(t.children){const i=t.children.default()[0].children;typeof i=="string"&&(t.props.label=i)}a.push(t.props)}})},r=()=>{const e=[];f.default&&N(f.default(),e),Object.assign(e,d.items),JSON.stringify(e)!=JSON.stringify(m.value)&&(m.value=e)},h=e=>{Array.isArray(s.value)&&(s.value=s.value.filter(a=>a!=e))},T=()=>{w.value=!0},P=e=>{w.value=!1,x(e.target.value)};le(()=>{r(),R=setInterval(r,500),ae([s,m],()=>{var e,a;if(z.value)try{g.value=(e=s.value)==null?void 0:e.map(t=>m.value.find(i=>(i.disabled==""||i.disabled==!0?i.closable=!1:i.closable=!0,i.value===t)))}catch{throw new Error("v-model / model-value is not an array type")}else u.value="",V.value=(a=m.value.find(t=>t.value===s.value))==null?void 0:a.label},{immediate:!0,deep:!0})}),te(()=>{clearInterval(R)});const s=b({get(){return d.multiple&&d.modelValue==null?[]:d.modelValue},set(e){o("update:modelValue",e),o("change",e)}}),z=b(()=>d.multiple),x=e=>{w.value||(o("search",e),u.value=e)},F=()=>{z.value?s.value=[]:s.value=""},Q=()=>{u.value="",p.value=!1},H=b(()=>Array.isArray(s)?s.value.length>0:s.value!=""&&s.value!=null&&s.value!=null),L=b(()=>H.value?"":d.placeholder);return C("selectRef",$),C("openState",p),C("selectedValue",s),C("searchValue",u),C("multiple",z),C("searchMethod",d.searchMethod),(e,a)=>(y(),K("div",{class:k(["layui-select",{"has-content":n(H),"has-clear":l.allowClear,"has-disabled":l.disabled}])},[I(re,{ref_key:"selectRef",ref:$,disabled:l.disabled,contentClass:l.contentClass,contentStyle:l.contentStyle,"update-at-scroll":!0,autoFitWidth:!0,onHide:Q,onShow:a[5]||(a[5]=t=>p.value=!0)},{content:v(()=>[se("dl",ve,[l.items?(y(!0),K(ne,{key:0},oe(l.items,(t,i)=>(y(),O(U,ue(t,{key:i}),null,16))),128)):E("",!0),S(e.$slots,"default")])]),default:v(()=>[n(z)?(y(),O(ce,{key:0,modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=t=>g.value=t),"input-value":u.value,"onUpdate:input-value":a[1]||(a[1]=t=>u.value=t),"allow-clear":l.allowClear,placeholder:n(L),collapseTagsTooltip:l.collapseTagsTooltip,minCollapsedNum:l.minCollapsedNum,disabled:l.disabled,disabledInput:!l.showSearch,size:l.size,class:k({"layui-unselect":!0}),style:{width:"100%"},onRemove:h,onClear:F,onInputValueChange:x,onKeyupCapture:[a[2]||(a[2]=M(A(()=>{},["prevent","stop"]),["delete"])),a[3]||(a[3]=M(A(()=>{},["prevent","stop"]),["backspace"]))],onKeydownCapture:a[4]||(a[4]=M(A(()=>{},["prevent","stop"]),["enter"]))},W({suffix:v(()=>[I(n(j),{type:"layui-icon-triangle-d",class:k({triangle:p.value})},null,8,["class"])]),_:2},[n(f).prepend?{name:"prepend",fn:v(()=>[S(e.$slots,"prepend")]),key:"0"}:void 0,n(f).append?{name:"append",fn:v(()=>[S(e.$slots,"append")]),key:"1"}:void 0]),1032,["modelValue","input-value","allow-clear","placeholder","collapseTagsTooltip","minCollapsedNum","disabled","disabledInput","size"])):(y(),O(de,{key:1,size:l.size,disabled:l.disabled,readonly:!l.showSearch,modelValue:V.value,"allow-clear":l.allowClear,placeholder:n(L),class:k({"layui-unselect":!l.showSearch}),onCompositionstart:T,onCompositionend:P,onInput:x,onClear:F},W({suffix:v(()=>[I(n(j),{type:"layui-icon-triangle-d",class:k({triangle:p.value})},null,8,["class"])]),_:2},[n(f).prepend?{name:"prepend",fn:v(()=>[S(e.$slots,"prepend")]),key:"0"}:void 0,n(f).append?{name:"append",fn:v(()=>[S(e.$slots,"append")]),key:"1"}:void 0]),1032,["size","disabled","readonly","modelValue","allow-clear","placeholder","class"]))]),_:3},8,["disabled","contentClass","contentStyle"])],2))}}),Ve=J(me);export{Ve as a,be as c};
